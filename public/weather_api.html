<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Elements</title>
    
    <!-- Normalize CSS -->
    <link rel="stylesheet" href="/css/normalize.css" />

    <!-- Foundation CSS -->
    <link rel="stylesheet" href="/css/foundation.css" />

    <!-- Custom Google Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:300,400|Source+Sans+Pro:200,300,400,400italic,600' rel='stylesheet' type='text/css' />

    <!-- FontAwesome icons-->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" />
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/weather.css" />
    
    <!-- Modernizr.js -->
    <script src="/js/foundation/vendor/modernizr.js"></script>
  </head>

  <body>
      <div class="contain-to-grid fixed">
        <nav class="top-bar" data-topbar>
          <ul class="title-area">
            <li class="name">
              <h1 id="site-name"><a href="#"><i class="fa fa-cloud"></i> The Elements</a></h1>
            </li>
            <!-- <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li> -->
          </ul>
      
          <section class="top-bar-section">
            <!-- Right Nav Section -->
            <!-- <ul class="right">
              <li class="active"><a href="#">Featured posts</a></li>
              <li class=""><a href="#">View all posts</a></li>
              <li class=""><a href="#">Contact me</a></li>
            </ul> -->
          </section>
        </nav>
    </div>
    
    <div class="row top-row">
      <div class="small-12 columns">
        <h2 id="city"></h2>
        <h2 class="tag-line">3-day Forecast</h2>
      </div>
    </div>

    <div class="row"> 
      <div class="medium-4 columns" role="content" id="weather"></div>
    </div>
     
      
    <footer class="row bottom-row">
      <div class="small-12 columns">

        <hr/>

        <div class="row">
          <div class="small-10 columns">
            <p class="footer-text">Â© Copyright 2015 Justin Dietert.</p>
          </div>

          <div class="small-2 columns">
            <a href="#" class="jd-logo float-right"></a>
          </div>
        </div>
        
      </div>
    </footer>
    
    
    <script src="/js/foundation/vendor/jquery.js"></script>
    <script src="/js/foundation/foundation.min.js"></script>
    <script>
      $(document).foundation();
    </script>

    <script>
      (function() {

          // Current Weather
          //---------------------------------//

          var cityNameDisplay = $('#city');
          var coordDisplay = $('#coord');
          var weatherDisplay = $('#weather');
          var weatherHtml = '';

          var currentWeather = $.ajax('http://api.openweathermap.org/data/2.5/weather?q=San+Antonio,TX');

          currentWeather.done(function(data){
              console.log(data);
            
              var panelStart = '<div class="panel">';
              var currentTemp = '<h3>' + Math.round((data.main.temp -273.15) * 1.8 + 32) + '<span class="text-top">&#176;F</span>' + '<span class="lighter-weight">/</span>' + Math.round(data.main.temp -273.15) + '<span class="text-top">&#176;C</span></h3>';
              var icon = '<img class="weather-icon" src="http://openweathermap.org/img/w/' + data.weather[0].icon + '.png">';
              var humidity = '<ul><li><span class="heavy-weight">Humidity: </span>' + data.main.humidity + ' %</li>';
              var windSpeed = '<li><span class="heavy-weight">Wind: </span>' + data.wind.speed + ' m/s</li>';
              var pressure = '<li><span class="heavy-weight">Pressure: </span>' + data.main.pressure + ' hPa</li></ul>';
              var panelEnd = '</div>';

              var weatherToDisplay = panelStart + currentTemp + icon + humidity + windSpeed + pressure + panelEnd; 
              // pressure;

              cityNameDisplay.html(data.name);
              weatherDisplay.html(weatherToDisplay);
          });

          currentWeather.fail(function(){
              console.log('500, error connecting to openweathermap API');
          });

          // 3-day Weather
          //---------------------------------//

          var threeDayWeather = $.ajax('http://api.openweathermap.org/data/2.5/forecast/daily?lat=29.423017&lon=-98.48527&cnt=3&mode=json')

      })();
    </script>
  </body>
</html>
